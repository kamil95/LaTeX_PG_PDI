% Latex Template
% Politechnika Gdańska - Szablon Pracy Dyplomowej (Inżynierskiej/Magisterskiej)
% first version by Kamil Trzebiatowski
% this version: 2019.07.02

% Compiler: XeLaTex

% insert your chapters in: Chapters/ChaptersMain.tex
% insert your appendices in: Appendices/AppendicesMain.tex

% Bibliography manager: BibLaTex
% insert bibliography items in: bibliografia.bib

%  !-- Do not edit this file unless you know what you do. --! %

\documentclass[10pt, twoside, polish]{report}

\usepackage[utf8]{inputenc} % Required for inputting international characters
\usepackage{polski}
\usepackage[polish]{babel}

\usepackage[T1]{fontenc} % Output font encoding for international characters

\usepackage{blindtext}
\usepackage{geometry}
\usepackage{indentfirst}

\usepackage{amsmath} %paczka do rownan
\renewcommand{\theequation}{\thechapter.\arabic{equation}} %rownania postaci 2.1, 3.2

% ladowanie grafiki
\usepackage{graphicx}
\graphicspath{ {Images/} } %sciezka do obrazkow

\usepackage{float}
%

\newcommand\tab[1][1cm]{\hspace*{#1}}%komenda - tabulator, uzycie: tab[x], gdzie x jest dlugoscia akapitu
\newcommand*{\noaddvspace}{\renewcommand*{\addvspace}[1]{}}

% formatowanie wyliczen (listy kropkowanej)
\usepackage{enumitem}
\setlist[itemize]{noitemsep, topsep=0pt}
%

% FORMATOWANIE NAGLOWKOW %
\usepackage[explicit]{titlesec}
\usepackage{lipsum}
%%%%%
%FORMATOWANIE PRZYPISOW
\renewcommand{\footnotesize}{\small}
\usepackage{chngcntr}
\counterwithout{footnote}{chapter}
%%%%

\usepackage[toc,page]{appendix}

% WCZYTANIE PLIKU BIBLIOGRAFII
\usepackage[backend=biber, style=numeric-comp, sorting=none, maxnames=4, minnames=2, maxbibnames=99]{biblatex}

\addbibresource{bibliografia.bib}
\usepackage{csquotes}

% FORMATOWANIE WPISÓW BIBLIOGRAFII %
\renewcommand*{\finalnamedelim}{\multinamedelim} %usuniecie finalnego 'i'

\renewbibmacro*{volume+number+eid}{%
\iffieldundef{volume}{}{,\space vol.
  \printfield{volume}%
  \setunit*{\addspace}%
,\space nr
  \printfield{number}%,
,
  \setunit{\addcomma\space}%
  \printfield{eid}}
}
%\DeclareFieldFormat[article]{volume}{,vol. #1 }
%\DeclareFieldFormat[article]{number}{ nr #1}

\DeclareFieldFormat[article]{citetitle}{#1}
\DeclareFieldFormat[article]{title}{#1}

\renewbibmacro{title}{%
  \ifentrytype{article}{\textit{\printfield{title}}}{\printfield{title}}
}

\renewbibmacro*{issue+date}{%
  \setunit{\addcomma\space}% NEW
%  \printtext[parens]{% DELETED
    \iffieldundef{issue}
      {\usebibmacro{date}}
      {\printfield{issue}%
       \setunit*{\addspace}%
%       \usebibmacro{date}}}% DELETED
       \usebibmacro{date}}% NEW
  \newunit}

\DeclareFieldFormat{journaltitle}{#1} % normal journal title

\usepackage{hyperref}
\usepackage{bookmark}
\def\UrlBreaks{\do\/\do-}

% Format Bibliography @online articles
\usepackage{color}
%\usepackage{url}
\urlstyle{same}
\DefineBibliographyStrings{polish}{urlseen = {data dostępu:}}
\DeclareFieldFormat{url}{\color{blue}\url{#1}}
%\DeclareFieldFormat{url}{\url{#1}}

% ------------------------------------------------ %

% ------------------------------------------------ %
%%   formatowanie naglowkow, kropki po numeracji  %%
%88888888888888888888%
\usepackage{nameref}
\makeatletter
\newcommand*{\currentname}{\@currentlabelname}
%88888888888888888888%


\titleformat{\chapter}
{\large\bfseries}
{\thechapter.}{0.5em}{\MakeUppercase{#1}}

\titleformat{\section}
{\normalfont\bfseries\itshape}
{\thesection.}{0.5em}{#1}

\titleformat{\subsection}
{\normalfont\itshape}
{\thesubsection.}{0.5em}{#1}
%------------------------------%

%% POLSKIE NAZWY - ZMIANA NA WYMAGANE %%
\addto\captionspolish{\renewcommand{\listtablename}{\textbf{Wykaz tabel}}}
\addto\captionspolish{\renewcommand{\listfigurename}{\textbf{Wykaz rysunków}}}

\addto\captionspolish{\renewcommand{\bibname}{\textbf{Wykaz literatury}}}
\renewcommand\bibname{Wykaz literatury}
\addto\captionspolish{\renewcommand{\refname}{\textbf{Wykaz literatury}}}
\renewcommand\refname{Wykaz literatury}

\addto\captionspolish{\renewcommand{\appendixname}{Dodatek}}
%% --------------------------------------------------- %%

% FORMATOWANIE PODPISOW POD OBRAZKAMI %
\usepackage{caption,setspace}
\usepackage{subcaption}
\addto\captionspolish{\renewcommand{\figurename}{Rys.}}
\captionsetup{labelsep=period}

\captionsetup{font={small, stretch=1.0}}     		%  FONT 9 pt Interlinia 1 pt
\captionsetup{belowskip=12pt,aboveskip=6pt}%Górny odstęp akapitu powinien być ustawiony na wartość 6 pkt, a dolny 12 pkt
\captionsetup{justification=centering}		% wysrodkowanie
%\renewcommand{\thefigure}{\thechapter\arabic{figure}} % set caption label style to 1.1.
\setlength{\belowcaptionskip}{0pt}
\setlength{\floatsep}{0pt}
\setlength{\intextsep}{10pt}
\setlength{\textfloatsep}{10pt}

%--------------%%%%%%%%%%--------------%

% FORMATOWANIE PODPISOW NAD TABELAMI %
\addto\captionspolish{\renewcommand{\tablename}{Tabela}}

%\captionsetup[table]{belowskip=0pt,aboveskip=6pt}%Górny odstęp akapitu powinien być ustawiony na wartość 6 pkt, a dolny 0 pkt
%\captionsetup[table]{justification=justified}		

 \captionsetup[table]{
  labelsep = newline,
font={small, stretch=1.1}, %  FONT 9 pt Interlinia ~1.1 pt
  justification=justified,% wyrownanie  do lewej
  singlelinecheck=false,%%%%%%% a single line is centered by default
  labelsep=period,%%%%%%
  belowskip=0pt, % skip pod/nad tabela
  aboveskip=6pt,% skip pod/nad tabela
  skip = 1.5mm, %skip pod nazwa tabeli
}

%\renewcommand{\thetable}{\thechapter\arabic{table}.} % set caption label style to 1.1.

\usepackage{tabularx}
\renewcommand{\arraystretch}{1.4} %wysokosc wiersza TABELI (teraz ok. 0,5 cm)
%--------------%%%%%%%%%%--------------%

% HEADER, FOOTER FORMATTING %
\usepackage{fancyhdr}
\fancypagestyle{plain}{%
\fancyhf{} % clear all header and footer fields
\fancyfoot[C]{\small\thepage} % WYSRODKOWANY, 9 PT
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}}
\pagestyle{plain}
% ---------------------------------------%

%-------- FORMATOWANIE SPISU TRESCI --------%
\usepackage[dotinlabels]{titletoc}
\usepackage{tocloft}
%\usepackage[nottoc]{tocbibind}
%\usepackage{afterpage}

\titlecontents{chapter}[0cm]{}{\normalsize\bfseries\contentslabel{-1pt}\hspace*{0.6cm}}{}{\titlerule*[3pt]{.}\hspace*{5pt}\contentspage}

\titlecontents{section}[0.6cm]{}{\normalsize\contentslabel{-1pt}\hspace*{0.9cm}}{}{\titlerule*[3pt]{.}\hspace*{5pt}\contentspage}

\titlecontents{subsection}
  [1.5cm]{}{\normalsize\contentslabel{-1pt}\hspace*{1.4cm}}{}{\titlerule*[3pt]{.}\hspace*{5pt}\contentspage}

\usepackage{listings}
\usepackage{courier}
\lstset{basicstyle=\footnotesize\ttfamily,breaklines=true}
\lstset{
  basicstyle = \footnotesize\ttfamily,
  basewidth  = {.5em,0.5em},
  breaklines = true,
  % columns  = flexible,
  % columns  = fullflexible,
}
%ustalanie interlinii
\setlength\cftparskip{-0.6pt}
\setlength\cftbeforechapskip{0pt}

\renewcommand{\cfttoctitlefont}{\large\bfseries\MakeUppercase}
\renewcommand{\cftaftertoctitle}{\hfill}
% --------------------------------------------------------%

%- FORMATOWANIE LIST OF TABLES, LIST OF FIGURES -%
\titlecontents{figure}[0cm]{}{\normalsize\contentslabel{-1pt}\hspace*{1cm}}{}{\titlerule*[3pt]{.}\hspace*{5pt}\contentspage}
\titlecontents{table}[0cm]{}{\normalsize\contentslabel{-1pt}\hspace*{1cm}}{}{\titlerule*[3pt]{.}\hspace*{5pt}\contentspage}

\renewcommand{\cftlottitlefont}{\large\bfseries\MakeUppercase}
\renewcommand{\cftafterlottitle}{\hfill}

\renewcommand{\cftloftitlefont}{\large\bfseries\MakeUppercase}
\renewcommand{\cftafterloftitle}{\hfill}
% --------------------------------------------------------%

% POPRAWKA NA MARGINESY (akapity) TYTUŁÓW %
\titlespacing*{\chapter}{0pt}{-20pt}{6pt}
\titlespacing*{name=\chapter,numberless}{0pt}{-20pt}{6pt}

\titlespacing*{\section}{0pt}{12pt}{6pt}
\titlespacing*{\subsection}{0pt}{12pt}{6pt}

\setlength{\cftbeforetoctitleskip}{-15pt} %TOC = SPIS TRESCI
\setlength{\cftaftertoctitleskip}{12pt} %TOC = SPIS TRESCI

\setlength{\cftbeforeloftitleskip}{-15pt} %LOF =  SPIS RYSUNKOW
\setlength{\cftafterloftitleskip}{12pt} %LOF

\setlength{\cftbeforelottitleskip}{-15pt} %LOT = SPIS TABEL
\setlength{\cftafterlottitleskip}{12pt} %LOT

%\setlength{\cftbeforebibltitleskip}{-15pt} %BIB = WYKAZ LITERATURY
%\setlength{\cftafterbibltitleskip}{12pt} %BIB = WYKAZ LITERATURY
%  -------------------------------------------------------- %

%\usepackage{showframe}
%% FONTY
\usepackage{unicode-math}
\usepackage{fontspec}
\setmainfont{Arial}
\usepackage{pdfpages}
% Alternative Math fonts - change to yours or uncomment something %
%\usepackage[varg]{txfonts}
%\usepackage{newtxtext}
%\usepackage{newtxmath}
%\usepackage{newtxmath}
\setmathfont{[mathfont.ttf]}
%\setmathfont{Computer Modern}
% --------------------------------------------------------------- %
\usepackage{multirow}
%\usepackage{multicolumn}

\addtocontents{toc}{\protect\noaddvspace}
\renewcommand{\baselinestretch}{1.45} %1,5 wiersza interlinii (wzór=ms word)
\setlength{\parindent}{4em}
\setlength{\parskip}{1em}

\title{
	{Praca/Projekt dyplomowa/y magisterska/inżynierski - szablon LATEX
    }\\
	{\large Politechnika Gdańska}\\
	{\includegraphics{pg_logo.jpg}}
}
\author{Kamil Trzebiatowski - 2019}
\date{\textbf{[PLACEHOLDER - Tę stronę należy zastąpić wydrukiem z Moja PG]}}

\geometry{
	paper=a4paper, % A4
	inner=3.5cm, % Inner margin
	outer=2.5cm, % Outer margin
	bindingoffset=0cm, % Binding offset
	top=2.5cm, % Top margin
	bottom=2.5cm, % Bottom margin
	footskip=1cm, % polozenie stopki
	%showframe % Uncomment to show how the type block is set on the page
}

%%%%%% WLASCIWY DOKUMENT - START %%%%%%
%%%%%% -------------------------------------- %%%%%%
\begin{document}
 
% STRONA TYTULOWA PRACY DYPLOMOWEJ - s 1, numer niewidoczny
% \begin{titlepage}
% \pagestyle{plain}
% \pagenumbering{arabic}
% \setcounter{page}{1}
% \maketitle
% \end{titlepage}
\includepdf[pages={1}]{StronaTytulowa.pdf}
\setlength{\parskip}{0pt}
% OSWIADCZENIE AUTORA PRACY - s 2, numer niewidoczny
% \chapter*{Deklaracja zgodności}
% \normalsize
% Dekaruję zgodność produktu z dyrektywą 2006/112/UE oraz 2014/35/UE i normami PN-EN 1176-1:2009, PN-EN 1939:2007.\par\textbf{[PLACEHOLDER - Tę stronę należy zastąpić wydrukiem z Moja PG]}
\includepdf[pages={1}]{Oswiadczenie.pdf}
% STRESZCZENIE  - s 3, numer widoczny
\input{Chapters/Streszczenie}

% ABSTRACT - s 4, numer widoczny,
\input{Chapters/Abstract}

% SPIS TREŚCI - s 5, numer widoczny
\setcounter{tocdepth}{2}
\clearpage
\phantomsection
\pdfbookmark{\contentsname}{Contents}
\tableofcontents

% Wykaz ważniejszych oznaczeń i skrótów
\input{Chapters/WWOIS}

% TREŚĆ PRACY
%ustalenie wcięć (akapitu)
\setlength{\parindent}{1.5cm}

\input{Chapters/ChaptersMain}

%\defbibheading{bibliography}[\bibname]{\chapter*{#1}}

% WYKAZ LITERATURY
\clearpage\phantomsection
\addcontentsline{toc}{chapter}{\textbf{Wykaz literatury}}
\printbibliography[title={Wykaz literatury}]

% WYKAZ RYSUNKÓW
\clearpage\phantomsection
\addcontentsline{toc}{chapter}{\listfigurename}
\listoffigures

% WYKAZ TABEL
\clearpage\phantomsection
\addcontentsline{toc}{chapter}{\listtablename}
\listoftables

% DODATKI
% formatowanie naglowkow dodatkow
\renewcommand\theHchapter{\Alph{chapter}}
\renewcommand\thechapter{\Alph{chapter}}                % chapter number in alph letters
\renewcommand\thesection{\Alph{chapter}.\arabic{section}} % make sections "A.I"
\setcounter{chapter}{0}                                  % start numbering chapters from 1 on again
\titleformat{\chapter}{\large\bfseries}{\MakeUppercase{\appendixname~\thechapter.~\currentname}}{0.5em}{}

\titlecontents{chapter}[0cm]{}{\normalsize\bfseries{Dodatek\space}\contentslabel{-1pt}\hspace*{0.6cm}}{}{\titlerule*[3pt]{.}\hspace*{5pt}\contentspage}

\input{Appendices/AppendicesMain}

\end{document}
%%%%%% ------------------------------------- %%%%%%
%%%%%% WLASCIWY DOKUMENT - STOP %%%%%%
